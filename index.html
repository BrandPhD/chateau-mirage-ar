
<!DOCTYPE html>
<html>
  <head>
    <title>Château Mirage AR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/aframe@1.3.0/dist/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js@3.4.3/aframe/build/aframe-ar.js"></script>
    <style>
      body, html { margin: 0; overflow: hidden; background: #000; }
      .loading {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: radial-gradient(circle at top, #2e0b59, #000000);
        z-index: 5;
      }
    </style>
  </head>

  <body>
    <div class="loading" id="loadingMessage">
      Move your camera to find the AR marker (HIRO)
    </div>

    <a-scene
      embedded
      vr-mode-ui="enabled: false"
      renderer="logarithmicDepthBuffer: true; antialias: true"
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
      loading-screen="enabled: false"
      >

      <!-- Soft ambient light so the image is easy to see -->
      <a-entity light="type: ambient; intensity: 1"></a-entity>

      <!-- Château Mirage animated poster -->
      <a-image
        id="poster"
        src="chateau_mirage_image.jpg"
        position="0 0 0"
        rotation="-90 0 0"
        width="1"
        height="1.6"
        opacity="0.0"
        >
        <!-- Fade in -->
        <a-animation
          attribute="opacity"
          from="0.0"
          to="1.0"
          dur="2000"
          begin="markerFound">
        </a-animation>

        <!-- Gentle floating motion -->
        <a-animation
          attribute="position"
          from="0 0 0"
          to="0 0.1 0"
          direction="alternate"
          dur="3000"
          repeat="indefinite"
          easing="easeInOutSine">
        </a-animation>

        <!-- Subtle breathing scale -->
        <a-animation
          attribute="scale"
          from="1 1 1"
          to="1.05 1.05 1.05"
          direction="alternate"
          dur="3500"
          repeat="indefinite"
          easing="easeInOutSine">
        </a-animation>
      </a-image>

      <!-- Soft glow behind the poster -->
      <a-ring
        position="0 0 -0.02"
        rotation="-90 0 0"
        radius-inner="0.55"
        radius-outer="0.9"
        color="#ffb347"
        opacity="0.15">
        <a-animation
          attribute="scale"
          from="1 1 1"
          to="1.3 1.3 1.3"
          direction="alternate"
          dur="2800"
          repeat="indefinite"
          easing="easeInOutSine">
        </a-animation>
        <a-animation
          attribute="opacity"
          from="0.05"
          to="0.25"
          direction="alternate"
          dur="2800"
          repeat="indefinite"
          easing="easeInOutSine">
        </a-animation>
      </a-ring>

      <!-- Marker camera (use printed HIRO marker) -->
      <a-marker-camera preset="hiro" emitevents="true"></a-marker-camera>
    </a-scene>

    <script>
      // Hide loading message once AR starts
      const scene = document.querySelector('a-scene');
      const loadingMessage = document.getElementById('loadingMessage');
      const markerCamera = document.querySelector('a-marker-camera');

      scene.addEventListener('loaded', () => {
        if (loadingMessage) {
          loadingMessage.textContent = "Point your camera at the HIRO marker to reveal Château Mirage";
        }
      });

      markerCamera.addEventListener('markerFound', () => {
        if (loadingMessage) {
          loadingMessage.style.display = 'none';
        }
      });

      markerCamera.addEventListener('markerLost', () => {
        if (loadingMessage) {
          loadingMessage.style.display = 'flex';
          loadingMessage.textContent = "Marker lost. Move your camera back to the HIRO marker.";
        }
      });
    </script>
  </body>
</html>
